jQuery(document).ready(function(){""==document.getElementById("event_date").value&&jQuery("#event_date").mask("DD/MM/YYYY");""==document.getElementById("event_start_time").value&&jQuery("#event_start_time").mask("--:-- ZM",{translation:{Z:{pattern:/(A|P)/,optional:!1}}});""==document.getElementById("event_end_time").value&&jQuery("#event_end_time").mask("--:-- ZM",{translation:{Z:{pattern:/(A|P)/,optional:!1}}});jQuery("#live_stream_yes:checked").val()&&jQuery("#live_stream").show();jQuery("#live_stream_no").click(function(){jQuery("#live_stream").hide()}); jQuery("#live_stream_yes").click(function(){jQuery("#live_stream").show()})}); (function(a){var k=function(d,p,h){var f=this,e;d=a(d);p="function"===typeof p?p(d.val(),void 0,d,h):p;f.init=function(){h=h||{};f.byPassKeys=[9,16,17,18,36,37,38,39,40,91];f.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};f.translation=a.extend({},f.translation,h.translation);f=a.extend(!0,{},f,h);d.each(function(){!1!==h.maxlength&&d.attr("maxlength",p.length);d.attr("autocomplete","off");c.destroyEvents(); c.events();c.val(c.getMasked())})};var c={getCaret:function(){var b;b=0;var a=d.get(0),c=document.selection,t=a.selectionStart;if(c&&!~navigator.appVersion.indexOf("MSIE 10"))a.focus(),b=c.createRange(),b.moveStart("character",-a.value.length),b=b.text.length;else if(t||"0"===t)b=t;return b},setCaret:function(b){var a;a=d.get(0);a.setSelectionRange?(a.focus(),a.setSelectionRange(b,b)):a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveEnd("character",b),a.moveStart("character",b),a.select())}, events:function(){d.on("keydown.mask",function(){e=c.val()});d.on("keyup.mask",c.behaviour);d.on("paste.mask",function(){setTimeout(function(){d.keydown().keyup()},100)})},destroyEvents:function(){d.off("keydown.mask keyup.mask paste.mask")},val:function(b){var a=d.is("input");return 0<arguments.length?a?d.val(b):d.text(b):a?d.val():d.text()},behaviour:function(b){b=b||window.event;var d=b.keyCode||b.which;if(-1===a.inArray(d,f.byPassKeys)){var e,t=c.getCaret();t<c.val().length&&(e=!0);var h=c.getMasked(); h!==c.val()&&c.val(h);!e||65===d&&b.ctrlKey||c.setCaret(t);return c.callbacks(b)}},getMasked:function(b){var a=[],d=c.val(),e=0,k=p.length,n=0,B=d.length,r=1,s="push",w=-1,x,F;for(h.reverse?(s="unshift",r=-1,x=0,e=k-1,n=B-1,F=function(){return-1<e&&-1<n}):(x=k-1,F=function(){return e<k&&n<B});F();){var H=p.charAt(e),J=d.charAt(n),C=f.translation[H];if(C)J.match(C.pattern)?(a[s](J),C.recursive&&(-1===w?w=e:e===x&&(e=w-r),x===w&&(e-=r)),e+=r):C.optional&&(e+=r,n-=r),n+=r;else{if(!b)a[s](H);J===H&&(n+= r);e+=r}}b=p.charAt(x);k!==B+1||f.translation[b]||a.push(b);return a.join("")},callbacks:function(b){var a=c.val(),f=c.val()!==e;if(!0===f&&"function"===typeof h.onChange)h.onChange(a,b,d,h);if(!0===f&&"function"===typeof h.onKeyPress)h.onKeyPress(a,b,d,h);if("function"===typeof h.onComplete&&a.length===p.length)h.onComplete(a,b,d,h)}};f.remove=function(){c.destroyEvents();c.val(f.getCleanVal()).removeAttr("maxlength")};f.getCleanVal=function(){return c.getMasked(!0)};f.init()};a.fn.mask=function(d, p){return this.each(function(){a(this).data("mask",new k(this,d,p))})};a.fn.unmask=function(){return this.each(function(){try{a(this).data("mask").remove()}catch(d){}})};a.fn.cleanVal=function(){return a(this).data("mask").getCleanVal()};a("*[data-mask]").each(function(){var d=a(this),k={};"true"===d.attr("data-mask-reverse")&&(k.reverse=!0);"false"===d.attr("data-mask-maxlength")&&(k.maxlength=!1);d.mask(d.attr("data-mask"),k)})})(window.jQuery||window.Zepto); (function(a){var k,d,p={method:"GET",contentType:"json",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",animateDropdown:!0,tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",prePopulate:null,processPrePopulate:!1,idPrefix:"token-input-",resultsFormatter:function(a){return"<li>"+a[this.propertyToSearch]+"</li>"},tokenFormatter:function(a){return"<li><p>"+ a[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null},h={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"};k=0;d=1;var f= {init:function(d,c){var b=a.extend({},p,c||{});return this.each(function(){a(this).data("tokenInputObject",new a.TokenList(this,d,b))})},clear:function(){this.data("tokenInputObject").clear();return this},add:function(a){this.data("tokenInputObject").add(a);return this},remove:function(a){this.data("tokenInputObject").remove(a);return this},get:function(){return this.data("tokenInputObject").getTokens()}};a.fn.tokenInput=function(a){return f[a]?f[a].apply(this,Array.prototype.slice.call(arguments, 1)):f.init.apply(this,arguments)};a.TokenList=function(e,c,b){function f(){null!==b.tokenLimit&&u>=b.tokenLimit&&(l.hide(),s())}function p(g){var d=b.tokenFormatter(g),d=a(d).addClass(b.classes.token).insertBefore(D);a("<span>"+b.deleteText+"</span>").addClass(b.classes.tokenDelete).appendTo(d).click(function(){B(a(this).parent());q.change();return!1});var v={id:g.id};v[b.propertyToSearch]=g[b.propertyToSearch];a.data(d.get(0),"tokeninput",g);y=y.slice(0,z).concat([v]).concat(y.slice(z));z++;r(y, q);u+=1;null!==b.tokenLimit&&u>=b.tokenLimit&&(l.hide(),s());return d}function t(g){var d=b.onAdd;if(0<u&&b.preventDuplicates){var v=null;E.children().each(function(){var b=a(this),d=a.data(b.get(0),"tokeninput");if(d&&d.id===g.id)return v=b,!1});if(v){I(v);D.insertAfter(v);l.focus();return}}if(null==b.tokenLimit||u<b.tokenLimit)p(g),f();l.val("");s();a.isFunction(d)&&d.call(q,g)}function I(a){a.addClass(b.classes.selectedToken);m=a.get(0);l.val("");s()}function n(a,c){a.removeClass(b.classes.selectedToken); m=null;c===k?(D.insertBefore(a),z--):c===d?(D.insertAfter(a),z++):(D.appendTo(E),z=u);l.focus()}function B(g){var d=a.data(g.get(0),"tokeninput"),v=b.onDelete,c=g.prevAll().length;c>z&&c--;g.remove();m=null;l.focus();y=y.slice(0,c).concat(y.slice(c+1));c<z&&z--;r(y,q);u-=1;null!==b.tokenLimit&&l.show().val("").focus();a.isFunction(v)&&v.call(q,d)}function r(g,d){var c=a.map(g,function(a){return a[b.tokenValue]});d.val(c.join(b.tokenDelimiter))}function s(){G.hide().empty();A=null}function w(){G.css({position:"absolute", top:a(E).offset().top+a(E).outerHeight(),left:a(E).offset().left,zindex:999}).show()}function x(g,d){if(d&&d.length){G.empty();var c=a("<ul>").appendTo(G).mouseover(function(b){F(a(b.target).closest("li"))}).mousedown(function(b){t(a(b.target).closest("li").data("tokeninput"));q.change();return!1}).hide();a.each(d,function(d,e){var f=b.resultsFormatter(e),M=e[b.propertyToSearch],f=f.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+M+")(?![^<>]*>)(?![^&;]+;)","g"),M.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+ g+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")),f=a(f).appendTo(c);d%2?f.addClass(b.classes.dropdownItem):f.addClass(b.classes.dropdownItem2);0===d&&F(f);a.data(f.get(0),"tokeninput",e)});w();b.animateDropdown?c.slideDown("fast"):c.show()}else b.noResultsText&&(G.html("<p>"+b.noResultsText+"</p>"),w())}function F(g){g&&(A&&(a(A).removeClass(b.classes.selectedDropdownItem),A=null),g.addClass(b.classes.selectedDropdownItem),A=g.get(0))}function H(){var g=l.val().toLowerCase();g&&g.length&&(m&&n(a(m), d),g.length>=b.minChars?(b.searchingText&&(G.html("<p>"+b.searchingText+"</p>"),w()),clearTimeout(N),N=setTimeout(function(){J(g)},b.searchDelay)):s())}function J(g){var d=g+C(),c=K.get(d);if(c)x(g,c);else if(b.url){var c=C(),e={data:{}};-1<c.indexOf("?")?(c=c.split("?"),e.url=c[0],c=c[1].split("&"),a.each(c,function(a,b){var d=b.split("=");e.data[d[0]]=d[1]})):e.url=c;e.data[b.queryParam]=g;e.type=b.method;e.dataType=b.contentType;b.crossDomain&&(e.dataType="jsonp");e.success=function(c){a.isFunction(b.onResult)&& (c=b.onResult.call(q,c));K.add(d,b.jsonContainer?c[b.jsonContainer]:c);l.val().toLowerCase()===g&&x(g,b.jsonContainer?c[b.jsonContainer]:c)};a.ajax(e)}else b.local_data&&(c=a.grep(b.local_data,function(a){return-1<a[b.propertyToSearch].toLowerCase().indexOf(g.toLowerCase())}),a.isFunction(b.onResult)&&(c=b.onResult.call(q,c)),K.add(d,c),x(g,c))}function C(){var a=b.url;"function"==typeof b.url&&(a=b.url.call());return a}"string"===a.type(c)||"function"===a.type(c)?(b.url=c,c=C(),void 0===b.crossDomain&& (-1===c.indexOf("://")?b.crossDomain=!1:b.crossDomain=location.href.split(/\/+/g)[1]!==c.split(/\/+/g)[1])):"object"===typeof c&&(b.local_data=c);b.classes?b.classes=a.extend({},h,b.classes):b.theme?(b.classes={},a.each(h,function(a,d){b.classes[a]=d+"-"+b.theme})):b.classes=h;var y=[],u=0,K=new a.TokenList.Cache,N,L,l=a('<input type="text" autocomplete="off">').css({outline:"none"}).attr("id",b.idPrefix+e.id).focus(function(){null!==b.tokenLimit&&b.tokenLimit===u||!b.hintText||(G.html("<p>"+b.hintText+ "</p>"),w())}).blur(function(){s();a(this).val("")}).bind("keyup keydown blur update",function(){if(L!==(L=l.val())){var a=L.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");O.html(a);l.width(O.width()+30)}}).keydown(function(b){var c,e;switch(b.keyCode){case 37:case 39:case 38:case 40:if(a(this).val())return c=null,c=40===b.keyCode||39===b.keyCode?a(A).next():a(A).prev(),c.length&&F(c),!1;c=D.prev();e=D.next();c.length&&c.get(0)===m||e.length&&e.get(0)===m?37=== b.keyCode||38===b.keyCode?n(a(m),k):n(a(m),d):37!==b.keyCode&&38!==b.keyCode||!c.length?39!==b.keyCode&&40!==b.keyCode||!e.length||I(a(e.get(0))):I(a(c.get(0)));break;case 8:c=D.prev();if(a(this).val().length)1===a(this).val().length?s():setTimeout(function(){H()},5);else return m?(B(a(m)),q.change()):c.length&&I(a(c.get(0))),!1;break;case 9:case 13:case 108:case 188:if(A)return t(a(A).data("tokeninput")),q.change(),!1;break;case 27:return s(),!0;default:String.fromCharCode(b.which)&&setTimeout(function(){H()}, 5)}}),q=a(e).hide().val("").focus(function(){l.focus()}).blur(function(){l.blur()}),m=null,z=0,A=null,E=a("<ul />").addClass(b.classes.tokenList).click(function(b){if((b=a(b.target).closest("li"))&&b.get(0)&&a.data(b.get(0),"tokeninput")){var c=m;m&&n(a(m),2);c===b.get(0)?n(b,2):I(b)}else m&&n(a(m),2),l.focus()}).mouseover(function(c){(c=a(c.target).closest("li"))&&m!==this&&c.addClass(b.classes.highlightedToken)}).mouseout(function(c){(c=a(c.target).closest("li"))&&m!==this&&c.removeClass(b.classes.highlightedToken)}).insertBefore(q), D=a("<li />").addClass(b.classes.inputToken).appendTo(E).append(l),G=a("<div>").addClass(b.classes.dropdown).appendTo("body").hide(),O=a("<tester/>").insertAfter(l).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:l.css("fontSize"),fontFamily:l.css("fontFamily"),fontWeight:l.css("fontWeight"),letterSpacing:l.css("letterSpacing"),whiteSpace:"nowrap"});q.val("");e=b.prePopulate||q.data("pre");b.processPrePopulate&&a.isFunction(b.onResult)&&(e=b.onResult.call(q,e));e&&e.length&&a.each(e, function(a,b){p(b);f()});a.isFunction(b.onReady)&&b.onReady.call();this.clear=function(){E.children("li").each(function(){0===a(this).children("input").length&&B(a(this))})};this.add=function(a){t(a)};this.remove=function(b){E.children("li").each(function(){if(0===a(this).children("input").length){var c=a(this).data("tokeninput"),d=!0,e;for(e in b)if(b[e]!==c[e]){d=!1;break}d&&B(a(this))}})};this.getTokens=function(){return y}};a.TokenList.Cache=function(d){var c=a.extend({max_size:500},d),b={},f= 0;this.add=function(a,d){f>c.max_size&&(b={},f=0);b[a]||(f+=1);b[a]=d};this.get=function(a){return b[a]}}})(jQuery); function dispVideo(){document.getElementById("video-player").style.display="block";document.getElementById("audio-player").style.display="none";document.getElementById("watch").style.display="block";document.getElementById("transcript").style.display="block";document.getElementById("listen").style.display="none";document.getElementById("read").style.display="none";document.getElementById("discussion").style.display="none"} function dispRead(){document.getElementById("transcript").style.display="block";document.getElementById("watch").style.display="none";document.getElementById("listen").style.display="none";document.getElementById("read").style.display="block";document.getElementById("discussion").style.display="none"} function dispListen(){document.getElementById("audio-player").style.display="block";document.getElementById("video-player").style.display="none";document.getElementById("transcript").style.display="block";document.getElementById("watch").style.display="none";document.getElementById("listen").style.display="block";document.getElementById("read").style.display="none";document.getElementById("discussion").style.display="none"} function dispDiscuss(){document.getElementById("transcript").style.display="none";document.getElementById("watch").style.display="none";document.getElementById("listen").style.display="none";document.getElementById("read").style.display="none";document.getElementById("discussion").style.display="block"}jQuery("#speaker-names").tokenInput(speakers,{onAdd:addId,onDelete:removeId,preventDuplicates:!0,prePopulate:prepopulate}); function addId(a){var k=jQuery("#speaker-ids"),d=k.val();""==d?k.val(a.id):k.val(d+", "+a.id)}function removeId(a){var k=jQuery("#speaker-ids"),d=k.val();k.val(d.replace(RegExp(a.id+"{1},\\W|,\\W"+a.id+"{1}$|^"+a.id+"$"),""))};